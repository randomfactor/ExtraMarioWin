<Window x:Class="ExtraMarioWin.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:ExtraMarioWin"
        mc:Ignorable="d"
        Title="Extra Mario" Height="600" Width="600" MinHeight="120" MinWidth="240"
        Background="#808080">
    <Window.Resources>
        <!-- Modern, raised button style -->
        <Style x:Key="ActionButtonStyle" TargetType="Button">
            <Setter Property="Foreground" Value="#222"/>
            <Setter Property="Background" Value="#F5E6FA"/>
            <Setter Property="BorderBrush" Value="#99B6E6"/>
            <Setter Property="BorderThickness" Value="1"/>
            <!-- Uniform padding -->
            <Setter Property="Padding" Value="8"/>
            <Setter Property="Margin" Value="6,6,6,8"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="SnapsToDevicePixels" Value="True"/>
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="MinHeight" Value="44"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Grid>
                            <!-- Drop shadow simulation -->
                            <Border x:Name="shadow" CornerRadius="20" Background="#33000000" Margin="0,3,3,0"/>
                            <!-- Button chrome -->
                            <Border x:Name="chrome" CornerRadius="20" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                                <Border.Background>
                                    <!-- Gentle lavender gradient (no stark white) -->
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                        <GradientStop Color="#FFF3E6FF" Offset="0"/>
                                        <GradientStop Color="#FFE4D8FF" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <ContentPresenter Margin="{TemplateBinding Padding}"
                                                  HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="chrome" Property="BorderBrush" Value="#7AA0E6"/>
                                <Setter TargetName="chrome" Property="Background">
                                    <Setter.Value>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                            <GradientStop Color="#FFEFE0FF" Offset="0"/>
                                            <GradientStop Color="#FFD9CCFF" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <!-- Pressed look: slightly deeper lavender, inverted gradient -->
                                <Setter TargetName="chrome" Property="Margin" Value="0,2,0,-2"/>
                                <Setter TargetName="shadow" Property="Opacity" Value="0.2"/>
                                <Setter TargetName="chrome" Property="Background">
                                    <Setter.Value>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                            <GradientStop Color="#FFD9CCFF" Offset="0"/>
                                            <GradientStop Color="#FFEFE0FF" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="chrome" Property="Opacity" Value="0.6"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <!-- Diagonal turquoise -> deep purple gradient for roster background -->
        <LinearGradientBrush x:Key="RosterBackground" StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#40E0D0" Offset="0"/>
            <GradientStop Color="#4B0082" Offset="1"/>
        </LinearGradientBrush>
        <!-- Button bar gradient: bright pink to deep purple (bottom-right) -->
        <LinearGradientBrush x:Key="ButtonBarBackground" StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#FF69B4" Offset="0"/>
            <GradientStop Color="#4B0082" Offset="1"/>
        </LinearGradientBrush>
    </Window.Resources>
    <DockPanel Margin="3">
        <!-- Single modern button bar -->
        <StackPanel Orientation="Horizontal" DockPanel.Dock="Top" Background="{StaticResource ButtonBarBackground}" Margin="0">
            <Button Style="{StaticResource ActionButtonStyle}" Name="NextButton" Content="Next" Click="NextButton_Click"/>
            <Button Style="{StaticResource ActionButtonStyle}" Name="BumpButton" Content="Bump" Click="BumpButton_Click"/>
            <Button Style="{StaticResource ActionButtonStyle}" Name="AddButton" Content="Add" Click="AddButton_Click"/>
        </StackPanel>
        <ListBox x:Name="RosterList" ItemsSource="{Binding Singers}" BorderThickness="0" Background="{StaticResource RosterBackground}"
                 AllowDrop="True"
                 PreviewMouseLeftButtonDown="RosterList_PreviewMouseLeftButtonDown"
                 PreviewMouseMove="RosterList_PreviewMouseMove"
                 Drop="RosterList_Drop"
                 DragOver="RosterList_DragOver"
                 ScrollViewer.VerticalScrollBarVisibility="Auto">
            <ListBox.ItemContainerStyle>
                <Style TargetType="ListBoxItem">
                    <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                    <Setter Property="AllowDrop" Value="True" />
                </Style>
            </ListBox.ItemContainerStyle>
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Border CornerRadius="10" Margin="2" Padding="6" BorderBrush="#DDD" BorderThickness="1" HorizontalAlignment="Stretch"
                            Background="{Binding StageBrush}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <!-- Grab handle -->
                            <TextBlock Grid.Column="0" Text="☰" FontSize="18" Opacity="0.6" Margin="0,0,8,0" VerticalAlignment="Center"/>
                            <TextBlock Grid.Column="1" Text="{Binding StageName}" FontSize="20" FontWeight="SemiBold" VerticalAlignment="Center" TextTrimming="CharacterEllipsis" />
                            <!-- Edit (pencil) button -->
                            <Button Grid.Column="2" Content="✎" Width="32" Height="32" Margin="8,0,0,0" HorizontalAlignment="Right" VerticalAlignment="Center"
                                    Background="#FFEEF5FF" BorderBrush="#FFB7C6FF" BorderThickness="1" Foreground="#333"
                                    ToolTip="Edit" Tag="{Binding}" Click="EditSinger_Click" />
                            <!-- Remove button -->
                            <Button Grid.Column="3" Content="✖" Width="32" Height="32" Margin="8,0,0,0" HorizontalAlignment="Right" VerticalAlignment="Center"
                                    Background="#FFFCE8E8" BorderBrush="#FFC3A6A6" BorderThickness="1" Foreground="#7A1616"
                                    ToolTip="Remove" Tag="{Binding}" Click="RemoveSinger_Click" />
                        </Grid>
                    </Border>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </DockPanel>
</Window>
